# =============================================================================
# APPLICATION PROPERTIES - CV Generator Configuration
# =============================================================================
#
# This file contains all configuration properties for the CV Generator app.
# Properties can be overridden via environment variables or command-line args.
#
# @author Pranav Ghorpade
# @version 1.0
#
# Interview Note:
# Spring Boot's externalized configuration allows different settings per
# environment (dev/staging/prod) without code changes. Environment variables
# take precedence over these defaults.
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------------------
# Application name - used in logging and monitoring
spring.application.name=cv-generator

# Server port - Using 8055 to avoid conflicts with common ports (8080, 8000)
# Can be overridden with: java -jar app.jar --server.port=XXXX
# Railway/Render/Heroku provide PORT env variable
server.port=${PORT:8055}

# -----------------------------------------------------------------------------
# CLAUDE API CONFIGURATION
# -----------------------------------------------------------------------------
# API Key - MUST be set via environment variable for security
# Never commit actual API keys to version control!
# Set via: export CLAUDE_API_KEY=sk-ant-xxxxx (Linux/Mac)
# Set via: set CLAUDE_API_KEY=sk-ant-xxxxx (Windows)
claude.api.key=${CLAUDE_API_KEY:}

# Model selection - Claude Sonnet 4 for optimal quality/speed balance
# Available models: claude-sonnet-4-20250514, claude-opus-4-5-20251101
claude.api.model=claude-sonnet-4-20250514

# Maximum tokens for response (LaTeX CV can be lengthy)
# 8000 tokens allows for detailed CV + coach brief + JSON metadata
claude.api.max-tokens=8000

# API endpoint - Anthropic Messages API
claude.api.url=https://api.anthropic.com/v1/messages

# API timeout in milliseconds (30 seconds for complex generations)
claude.api.timeout=120000

# -----------------------------------------------------------------------------
# H2 DATABASE CONFIGURATION (File-based for persistence)
# -----------------------------------------------------------------------------
# Using H2 file-based database for data persistence across restarts
# Data is stored in ./data/cvdb files

# JDBC URL - file:./data/cvdb creates file-based database
# DB_CLOSE_DELAY=-1 keeps DB open while app runs
# AUTO_SERVER=TRUE allows multiple connections
spring.datasource.url=jdbc:h2:file:./data/cvdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;AUTO_SERVER=TRUE

# H2 driver class
spring.datasource.driverClassName=org.h2.Driver

# Default credentials (fine for local/demo database)
spring.datasource.username=sa
spring.datasource.password=

# Enable H2 web console for debugging (accessible at /h2-console)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# -----------------------------------------------------------------------------
# JPA / HIBERNATE CONFIGURATION
# -----------------------------------------------------------------------------
# Use 'update' to preserve data and only update schema changes
# Options: none, validate, update, create, create-drop
spring.jpa.hibernate.ddl-auto=update

# Show SQL queries in logs (helpful for debugging)
spring.jpa.show-sql=true

# Format SQL for readability
spring.jpa.properties.hibernate.format_sql=true

# H2 dialect for Hibernate
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# -----------------------------------------------------------------------------
# THYMELEAF CONFIGURATION
# -----------------------------------------------------------------------------
# Disable template caching in development (enables hot reload)
spring.thymeleaf.cache=false

# Template file location (default)
spring.thymeleaf.prefix=classpath:/templates/

# Template file suffix
spring.thymeleaf.suffix=.html

# Encoding
spring.thymeleaf.encoding=UTF-8

# -----------------------------------------------------------------------------
# FILE UPLOAD CONFIGURATION
# -----------------------------------------------------------------------------
# Maximum file size for uploads (not heavily used but good to configure)
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# -----------------------------------------------------------------------------
# LATEX COMPILER CONFIGURATION
# -----------------------------------------------------------------------------
# External LaTeX API for PDF compilation
# Using YtoTech's free LaTeX compilation service
latex.api.url=https://latex.ytotech.com/builds/sync

# Timeout for LaTeX compilation (can take time for complex documents)
latex.api.timeout=60000

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
# Root logging level
logging.level.root=INFO

# Application-specific logging (more verbose for debugging)
logging.level.com.pranav.cvgenerator=DEBUG

# Spring framework logging
logging.level.org.springframework.web=INFO

# SQL logging
logging.level.org.hibernate.SQL=DEBUG

# Log file location (optional - uncomment for file logging)
# logging.file.name=logs/cv-generator.log

# -----------------------------------------------------------------------------
# CACHING CONFIGURATION
# -----------------------------------------------------------------------------
# Cache TTL for generated CVs (24 hours in milliseconds)
cache.cv.ttl=86400000

# Maximum cache entries
cache.cv.max-size=100

# -----------------------------------------------------------------------------
# KEEP-ALIVE CONFIGURATION (For Free Tier Hosting)
# -----------------------------------------------------------------------------
# Enable self-ping to prevent spin-down on Render/Railway free tier
# Set to true and provide the app URL to keep alive
keepalive.enabled=${KEEPALIVE_ENABLED:false}
keepalive.url=${KEEPALIVE_URL:}

# -----------------------------------------------------------------------------
# GOOGLE SHEETS LOGGING (CV History)
# -----------------------------------------------------------------------------
# Webhook URL from Google Apps Script for logging CV generations
# Set up via: https://script.google.com (see README for instructions)
google.sheets.webhook.url=${GOOGLE_SHEETS_WEBHOOK:}
